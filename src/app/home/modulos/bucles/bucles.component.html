<!-- TÃ­tulo principal de la pÃ¡gina -->
<div class="text-center mb-6 mt-6">
  <h1 class="text-3xl font-bold text-gray-800 mb-2 drop-shadow-md">ğŸ”„ Estructuras de Control: Bucles</h1>
  <!-- Separador elegante con gradiente -->
  <div class="flex items-center justify-center mb-1">
    <div class="h-0.5 bg-gradient-to-r from-transparent via-red-500 to-transparent w-96 shadow-sm"></div>
  </div>
  <!-- LÃ­nea sutil adicional para mÃ¡s profundidad -->
  <div class="flex items-center justify-center">
    <div class="h-px bg-gradient-to-r from-transparent via-gray-300 to-transparent w-64 opacity-60"></div>
  </div>
</div>

<!-- Contenedor principal sin altura fija -->
<div class="min-h-screen">
  <!-- Una sola columna con dos filas -->
  <div class="flex flex-col gap-6 p-4 mx-8">

    <!-- Primera fila - SecciÃ³n 1 (ancho completo) -->
    <div class="bg-gray-500/20 backdrop-blur-md p-6 rounded-lg border border-gray-400/30 shadow-lg">
      <div class="mb-6">
        <h2 class="text-xl font-bold mb-3 text-gray-800">ğŸ” Â¿QuÃ© son los bucles o ciclos?</h2>
        <p class="text-gray-700 leading-relaxed mb-4 text-justify">
          Los bucles son estructuras de control que permiten repetir un conjunto de instrucciones mÃºltiples veces de forma automÃ¡tica,
          evitando tener que escribir el mismo cÃ³digo una y otra vez.
        </p>
        <p class="text-gray-700 leading-relaxed mb-4 text-justify">
          Es como tener un asistente que hace la misma tarea tantas veces como le indiques, o hasta que se cumpla cierta condiciÃ³n.
        </p>
        <div class="bg-red-50 p-3 rounded border-l-4 border-red-400 mb-4">
          <p class="text-red-800 text-sm font-medium mb-2"><strong>Ejemplo:</strong></p>
          <p class="text-gray-700 text-sm">En lugar de escribir "Imprimir Hola" 100 veces...</p>
          <p class="text-gray-700 text-sm">Usas un bucle: "Repetir 100 veces: Imprimir Hola"</p>
        </div>
      </div>

      <div class="mb-6">
        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">

          <!-- Tipos de bucles -->
          <div class="p-4 bg-purple-50 rounded-lg border-l-4 border-purple-400">
            <h3 class="text-lg font-semibold text-purple-600 mb-2">ğŸ¯ Tipos principales de bucles</h3>
            <div class="bg-white p-3 rounded border text-sm space-y-2">
              <div><span class="text-purple-600 font-semibold">â€¢ For (Para):</span> Se usa cuando sabes exactamente cuÃ¡ntas veces quieres repetir algo. Ejemplo: "Haz ejercicio 20 veces".</div>
              <div><span class="text-purple-600 font-semibold">â€¢ While (Mientras):</span> Se repite mientras una condiciÃ³n sea verdadera. Ejemplo: "Estudia mientras no entiendas el tema".</div>
              <div><span class="text-purple-600 font-semibold">â€¢ Do-While (Hacer-Mientras):</span> Hace algo al menos una vez, luego verifica si debe continuar.</div>
            </div>
          </div>

          <!-- Por quÃ© se llaman bucles -->
          <div class="p-4 bg-blue-50 rounded-lg border-l-4 border-blue-400">
            <h3 class="text-lg font-semibold text-blue-600 mb-2">ğŸŒ€ Â¿Por quÃ© se llaman "bucles"?</h3>
            <p class="text-gray-700 text-justify mb-3">
              Se llaman bucles porque el cÃ³digo "da vueltas" o "se enrolla" como un bucle,
              volviendo al inicio para repetir las mismas instrucciones una y otra vez.
            </p>
            <h4 class="text-md font-semibold text-blue-600 mb-2">ğŸ”„ VisualizaciÃ³n</h4>
            <div class="bg-white p-3 rounded border text-sm">
              <p class="text-gray-700">Piensa en una pista circular donde un corredor da vueltas:</p>
              <p class="text-gray-700">Vuelta 1 â†’ Vuelta 2 â†’ Vuelta 3... hasta completar todas.</p>
            </div>
          </div>

          <!-- MetÃ¡fora de la vida real -->
          <div class="p-4 bg-green-50 rounded-lg border-l-4 border-green-400">
            <h3 class="text-lg font-semibold text-green-600 mb-2">ğŸ  MetÃ¡fora: Tareas domÃ©sticas</h3>
            <p class="text-gray-700 text-justify mb-3">
              Imagina que tu mamÃ¡ te dice: "Lava todos los platos sucios"
            </p>
            <div class="bg-white p-3 rounded border text-sm space-y-1">
              <p class="text-gray-700"><strong>Paso 1:</strong> Tomar un plato</p>
              <p class="text-gray-700"><strong>Paso 2:</strong> Lavarlo con jabÃ³n</p>
              <p class="text-gray-700"><strong>Paso 3:</strong> Enjuagarlo</p>
              <p class="text-gray-700"><strong>Paso 4:</strong> Â¿Quedan mÃ¡s platos? Si sÃ­ â†’ volver al Paso 1</p>
              <p class="text-green-600 font-medium">Â¡Eso es exactamente un bucle while!</p>
            </div>
          </div>

          <!-- CuÃ¡ndo usar bucles -->
          <div class="p-4 bg-orange-50 rounded-lg border-l-4 border-orange-400">
            <h3 class="text-lg font-semibold text-orange-600 mb-2">âš¡ Â¿CuÃ¡ndo usar bucles?</h3>
            <p class="text-gray-700 text-justify mb-3">
              Los bucles son perfectos cuando necesitas:
            </p>
            <div class="bg-white p-3 rounded border text-sm">
              â€¢ Procesar listas de elementos (estudiantes, productos, etc.)<br>
              â€¢ Repetir cÃ¡lculos matemÃ¡ticos<br>
              â€¢ Validar datos hasta que sean correctos<br>
              â€¢ Crear patrones o secuencias<br>
              â€¢ Automatizar tareas repetitivas
            </div>
          </div>

          <!-- Elementos de un bucle -->
          <div class="p-4 bg-teal-50 rounded-lg border-l-4 border-teal-400">
            <h3 class="text-lg font-semibold text-teal-600 mb-2">ğŸ”§ Elementos de un bucle</h3>
            <div class="bg-white p-3 rounded border text-sm space-y-2">
              <div><span class="text-teal-600 font-semibold">â€¢ InicializaciÃ³n:</span> Preparar variables (contador = 0)</div>
              <div><span class="text-teal-600 font-semibold">â€¢ CondiciÃ³n:</span> Â¿CuÃ¡ndo parar? (contador < 10)</div>
              <div><span class="text-teal-600 font-semibold">â€¢ Cuerpo:</span> QuÃ© hacer en cada repeticiÃ³n</div>
              <div><span class="text-teal-600 font-semibold">â€¢ ActualizaciÃ³n:</span> Cambiar variables (contador + 1)</div>
            </div>
          </div>

          <!-- Importancia de los bucles -->
          <div class="p-4 bg-red-50 rounded-lg border-l-4 border-red-400">
            <h3 class="text-lg font-semibold text-red-600 mb-2">ğŸ’ Importancia de los bucles</h3>
            <p class="text-gray-700 text-justify mb-3">
              Los bucles son fundamentales porque:
            </p>
            <div class="bg-white p-3 rounded border text-sm">
              â€¢ Ahorran tiempo y lÃ­neas de cÃ³digo<br>
              â€¢ Reducen errores de escritura repetitiva<br>
              â€¢ Permiten procesar grandes cantidades de datos<br>
              â€¢ Hacen el cÃ³digo mÃ¡s legible y mantenible<br>
              â€¢ Son la base de la automatizaciÃ³n
            </div>
          </div>

          <!-- Ejemplos cotidianos -->
          <div class="p-4 bg-yellow-50 rounded-lg border-l-4 border-yellow-400">
            <h3 class="text-lg font-semibold text-yellow-600 mb-2">ğŸŒ… Ejemplos en la vida cotidiana</h3>
            <div class="bg-white p-3 rounded border text-sm">
              <p class="text-gray-700 mb-2"><strong>ğŸƒâ€â™‚ï¸ Ejercicio:</strong> "Haz 20 flexiones"</p>
              <p class="text-gray-700 mb-2"><strong>ğŸ“š Estudiar:</strong> "Repasa hasta entender el tema"</p>
              <p class="text-gray-700 mb-2"><strong>ğŸ³ Cocinar:</strong> "Revuelve la sopa cada 5 minutos hasta que estÃ© lista"</p>
              <p class="text-gray-700"><strong>ğŸµ MÃºsica:</strong> "Reproduce esta canciÃ³n en modo repetir"</p>
            </div>
          </div>

          <!-- Curiosidades -->
          <div class="p-4 bg-indigo-50 rounded-lg border-l-4 border-indigo-400">
            <h3 class="text-lg font-semibold text-indigo-600 mb-2">ğŸ§ª Curiosidades sobre bucles</h3>
            <div class="bg-white p-3 rounded border text-sm space-y-2">
              <p class="text-gray-700">â€¢ Un bucle infinito puede "colgar" un programa si no tiene condiciÃ³n de parada</p>
              <p class="text-gray-700">â€¢ Los bucles anidados (un bucle dentro de otro) pueden crear patrones complejos</p>
              <p class="text-gray-700">â€¢ En algunos lenguajes, puedes "romper" un bucle con la palabra "break"</p>
              <p class="text-gray-700">â€¢ Los videojuegos usan un bucle principal que se ejecuta 60 veces por segundo</p>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Segunda fila - SecciÃ³n 2 (ancho completo) -->
    <div class="bg-gray-500/20 backdrop-blur-md p-6 rounded-lg border border-gray-400/30 shadow-lg">
      <h2 class="text-xl font-bold mb-4 text-gray-800">ğŸ§ª Ejemplos DinÃ¡micos</h2>
      <p class="text-gray-700 mb-6 text-justify">
        A continuaciÃ³n encontrarÃ¡s ejemplos interactivos que demuestran cÃ³mo funcionan los bucles en situaciones cotidianas.
        Cada ejemplo incluye un diagrama de flujo que puedes visualizar paso a paso.
      </p>

      <!-- Contenedor de ejemplos con scroll horizontal -->
      <div class="overflow-x-auto">
        <div class="flex gap-6 pb-4" style="min-width: max-content;">

          <div *ngFor="let example of examples; let i = index"
               class="flex-shrink-0 bg-white/80 backdrop-blur-sm rounded-lg p-6 border border-gray-200 shadow-md hover:shadow-lg transition-shadow duration-200 flex flex-col justify-between"
               style="width: 350px; height: 350px;">

            <!-- Contenido superior (icono, tÃ­tulo y descripciÃ³n) -->
            <div class="flex-1 flex flex-col">
              <!-- Icono y tÃ­tulo -->
              <div class="flex items-center mb-4">
                #{{ i + 1 }}
                <span class="text-3xl mr-3">{{ getIconForExample(example.title) }}</span>
                <h3 class="text-lg font-semibold text-gray-800 line-clamp-2 leading-tight">{{ getCleanTitle(example.title) }}</h3>
              </div>

              <!-- DescripciÃ³n -->
              <p class="text-gray-600 text-sm mb-4 leading-relaxed line-clamp-4 flex-1">{{ example.description }}</p>
            </div>

            <!-- Contenido inferior (pregunta y botÃ³n) -->
            <div class="mt-auto">
              <!-- Pregunta -->
              <div class="bg-red-50 p-3 rounded-lg border-l-4 border-red-400 mb-4">
                <p class="text-red-800 text-xs font-medium line-clamp-3">{{ example.question }}</p>
              </div>

              <!-- BotÃ³n siempre en la parte inferior -->
              <button
                (click)="openFlowchartModal(example)"
                class="w-full bg-red-500 hover:bg-red-600 text-white py-3 px-4 rounded transition-colors duration-200 text-sm font-medium shadow-md hover:shadow-lg">
                ğŸš€ Ver Diagrama de Flujo
              </button>
            </div>
          </div>

        </div>
      </div>

      <!-- Nota informativa -->
      <div class="mt-8 p-4 bg-red-50 border border-red-200 rounded-lg">
        <p class="text-red-800 text-sm">
          <strong>ğŸ’¡ Consejo:</strong> Los bucles son herramientas poderosas que automatizan tareas repetitivas.
          Observa cÃ³mo cada ejemplo usa diferentes tipos de repeticiÃ³n segÃºn la situaciÃ³n.
        </p>
      </div>
    </div>

    <!-- Tercera fila - SecciÃ³n de Ejercicios (ancho completo) -->
    <div class="bg-gray-500/20 backdrop-blur-md p-6 rounded-lg border border-gray-400/35 shadow-lg">
      <h2 class="text-xl font-bold mb-4 text-gray-800">ğŸ¯ Ejercicios PrÃ¡cticos</h2>
      <p class="text-gray-700 mb-6 text-justify">
        Ahora es tu turno de practicar. Estos ejercicios te ayudarÃ¡n a dominar los bucles
        usando programaciÃ³n visual con Blockly. Cada ejercicio te enseÃ±arÃ¡ un concepto especÃ­fico.
      </p>

      <app-blockly-exercise
        [exercises]="blocklyExercises"
        [currentExerciseIndex]="currentBlocklyExerciseIndex"
        [urlgif]="urlGifts"
        (exerciseCompleted)="onBlocklyExerciseCompleted($event)"
        (nextExercise)="nextBlocklyExercise()"
        (previousExercise)="previousBlocklyExercise()">
      </app-blockly-exercise>
    </div>

  </div>
</div>

<!-- Modal genÃ©rico -->
<app-modal
  [isVisible]="showModal"
  [title]="modalTitle"
  [componentType]="modalComponentType"
  [componentInputs]="modalComponentInputs"
  (onClose)="closeModal()">
</app-modal>
